<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PurplePlatform - Synthetic Trading</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link rel="stylesheet" href="./styles/style.css" />
  <script src="https://unpkg.com/lightweight-charts@4.1.1/dist/lightweight-charts.standalone.production.js"></script>
<script src="https://unpkg.com/brain.js@2.0.0-beta.2/dist/brain-browser.min.js"></script>
</head>
<body>

  <!-- Top App Bar -->
  <header class="app-bar">
    <div class="app-title">üü£ PurplePlatform</div>
    <div class="app-actions">
      <button aria-label="Toggle Theme" id="themeToggle"><span class="material-icons">light_mode</span></button>
      <button><img src="https://i.pravatar.cc/40" class="mini-avatar" alt="Avatar"></button>
    </div>
  </header>

  <!-- User Info Header -->
  <section class="user-header">
    <div class="user-profile">
      <img src="https://i.pravatar.cc/100" alt="Profile" class="profile-pic" />
      <div class="user-meta">
        <div class="user-name">John Doe</div>
        <div class="user-id">Account: CR1234567</div>
        <div class="user-email">john@example.com</div>
      </div>
    </div>
    <div class="balance-box">
      <span>Balance:</span> <strong id="acct-bal">$10,000.00</strong>
    </div>
  </section>

  <!-- Chart Area -->
  <main>
    <section id="chart-section">
      <div id="chart"></div>
    </section>
  </main>

  <!-- Risk Amount Input (hidden by default) -->
  <div class="risk-entry hidden" id="risk-entry">
    <label for="risk-amount">Risk Amount:</label>
    <input type="number" id="risk-amount" placeholder="0.00" />
  </div>

  <!-- Toast Notification -->
  <div class="toast" id="toast">Trade Executed</div>

  <!-- Floating Action Bar -->
  <footer class="fab-bar">
    <div class="fab-container">
      <button class="fab-nav" title="Home" onclick = "fullScreen(document.getElementById('chart'),0);"><span class="material-icons">home</span></button>
      <button class="fab-nav" title="Chart" onclick = "fullScreen(document.getElementById('chart'),1);"><span class="material-icons">show_chart</span></button>

      <button id="sell-btn" class="fab-extended red hidden">
        <span class="material-icons">call_received</span> Sell
      </button>
      <button id="buy-btn" class="fab-extended green hidden">
        <span class="material-icons">call_made</span> Buy
      </button>

      <button id="main-fab" class="fab-main" aria-label="Trade">
        <span id="fabIcon" class="material-icons">add</span>
      </button>

      <button class="fab-nav" title="History" id = "his-but"><span class="material-icons">history</span></button>
      <button class="fab-nav" title="Bot"><span class="material-icons">smart_toy</span></button>
    </div>
  </footer>

  <!-- Login Card -->
  <div id="login-card" class="login-card hidden">
    <div class="login-content">
        <p class="close-btn" aria-label="Close Login" onclick = "document.getElementById('login-card').classList.add('hidden');">X</p>
      <h3>üîê Sign In To Continue</h3>
      <input type="text" placeholder="Enter API Key" id="api-key" />
      <button id="login-btn">Login</button>
    </div>
  </div>

  <div class="history-container hidden" id = "his-con">
    <h2>üìú Trade History</h2>
    <div class="filter-bar">
      <div class="date-input">
        <label>Start Date</label>
        <input type="date" id="startDate"/>
      </div>
      <div class="date-input">
        <label>End Date</label>
        <input type="date" id="endDate"/>
      </div>
      <button id="applyBtn">Apply</button>
    </div>
    <div id="history-list" class="history-list"></div>
  </div>

  <script type="module" src="./scripts/main.js"></script>
<script>
     function fullScreen(el, toggle = null, iconEl = null) {
  const isActive = el.dataset.fullscreen === "true";
  toggle = toggle ?? !isActive;

  let overlay = document.getElementById("fullscreen-overlay");
  if (!overlay) {
    overlay = document.createElement("div");
    overlay.id = "fullscreen-overlay";
    Object.assign(overlay.style, {
      position: "fixed",
      top: 0,
      left: 0,
      width: "100vw",
      height: "100vh",
      background: "rgba(0,0,0,0.6)",
      opacity: 0,
      zIndex: 9998,
      transition: "opacity 0.6s ease",
      pointerEvents: "none",
    });
    document.body.appendChild(overlay);
  }

  if (toggle) {
    const r = el.getBoundingClientRect();
    el.dataset.fullscreen = "true";
    el.dataset.originalStyle = el.style.cssText || "";

    // Hide other UI except footer
    document.querySelectorAll(".fullscreen-hide").forEach(e => {
      if (e.classList.contains("hidden")) {
        e.dataset.hiddenBefore = "true";
      } else {
        e.dataset.hiddenBefore = "false";
        e.classList.add("hidden");
      }
    });

    document.body.style.overflow = "hidden";

    Object.assign(el.style, {
      transition: "all 0.6s ease",
      transform: "scale(1)",
      position: "fixed",
      top: `${r.top}px`,
      left: `${r.left}px`,
      width: `${r.width}px`,
      height: `${r.height}px`,
      zIndex: 9999,
      background: "#000",
      boxShadow: "0 0 40px rgba(0,0,0,0.6)",
      display: "flex",
      flexDirection: "column",
      alignItems: "stretch",
    });

    requestAnimationFrame(() => {
      Object.assign(el.style, {
        top: "0",
        left: "0",
        width: "100vw",
        height: "100vh",
        transform: "scale(1.01)",
      });
      overlay.style.opacity = "1";

      setTimeout(() => {
        const chart = window.chartView?.getChart?.();
        const chartDiv = el.querySelector("#chart");
        if (chart && chartDiv) {
          chart.resize(chartDiv.clientWidth, chartDiv.clientHeight);
        }
      }, 650);
    });

    if (iconEl) iconEl.textContent = "fullscreen_exit";
  } else {
    el.dataset.fullscreen = "false";
    el.style.transition = "all 0.6s ease";
    el.style.transform = "scale(0.98)";
    overlay.style.opacity = "0";

    setTimeout(() => {
      el.style.cssText = el.dataset.originalStyle || "";

      document.querySelectorAll(".fullscreen-hide").forEach(e => {
        if (e.dataset.hiddenBefore === "false") {
          e.classList.remove("hidden");
        }
        delete e.dataset.hiddenBefore;
      });

      document.body.style.overflow = "";

      const chart = window.chartView?.getChart?.();
      const chartDiv = el.querySelector("#chart");
      if (chart && chartDiv) {
        chart.resize(chartDiv.clientWidth, chartDiv.clientHeight);
      }
    }, 600);

    if (iconEl) iconEl.textContent = "fullscreen";
  }
}

 </script>
 </body>
      </html>
          
